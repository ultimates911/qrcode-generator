version: "2"
sql:
  - engine: postgresql
    schema:
      - migrations/*.sql
    queries:
      - sqlc/queries/*.sql
    gen:
      go:
        package: sqldb
        out: sqlc/generated
        sql_package: pgx/v5
        emit_interface: true
        emit_json_tags: true
        emit_pointers_for_null_types: true

        overrides:
          - db_type: "pg_catalog.int4"
            nullable: false
            go_type: { type: "int64" }
          - db_type: "pg_catalog.int4"
            nullable: true
            go_type: { type: "int64", pointer: true }
        
          - db_type: "pg_catalog.serial4"
            nullable: false
            go_type: { type: "int64" }
          - db_type: "pg_catalog.serial4"
            nullable: true
            go_type: { type: "int64", pointer: true }
        
          - db_type: "int4"
            nullable: false
            go_type: { type: "int64" }
          - db_type: "int4"
            nullable: true
            go_type: { type: "int64", pointer: true }
          - db_type: "serial4"
            nullable: false
            go_type: { type: "int64" }
          - db_type: "serial4"
            nullable: true
            go_type: { type: "int64", pointer: true }
        
          - db_type: "pg_catalog.timestamptz"
            nullable: false
            go_type: { import: "time", type: "Time" }
          - db_type: "pg_catalog.timestamptz"
            nullable: true
            go_type: { import: "time", type: "Time", pointer: true }
          - db_type: "timestamptz"
            nullable: false
            go_type: { import: "time", type: "Time" }
          - db_type: "timestamptz"
            nullable: true
            go_type: { import: "time", type: "Time", pointer: true }
        
          - column: "users.id"
            go_type: { type: "int64" }
          - column: "links.id"
            go_type: { type: "int64" }
          - column: "qr_codes.id"
            go_type: { type: "int64" }
          - column: "transitions.id"
            go_type: { type: "int64" }
